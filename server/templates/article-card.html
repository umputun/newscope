<article class="article-card" data-score="{{.RelevanceScore}}">
    <!-- Expanded view header -->
    <div class="article-header expanded-only">
        <h3><a href="{{.Link}}" target="_blank" rel="noopener">{{.Title}}</a></h3>
        <div class="article-meta">
            <a href="#" class="feed-name clickable-feed"
               data-feed="{{.FeedName}}"
               hx-get="/articles"
               hx-vals='{"feed":"{{.FeedName}}"}'
               hx-trigger="click"
               hx-target="#articles-with-pagination"
               hx-include="#score-filter, #topic-filter, #sort-filter">{{.FeedName}}</a>
            <time datetime="{{.Published.Format "2006-01-02T15:04:05Z07:00"}}">
                {{.Published.Local.Format "Jan 2, 2006 15:04 MST"}}
            </time>
        </div>
    </div>
    
    <!-- Condensed view header -->
    <div class="article-header-condensed condensed-only">
        <div class="condensed-main">
            <h3><a href="{{.Link}}" target="_blank" rel="noopener">{{.Title}}</a></h3>
            <div class="condensed-meta">
                <a href="#" class="feed-name clickable-feed"
                   data-feed="{{.FeedName}}"
                   hx-get="/articles"
                   hx-vals='{"feed":"{{.FeedName}}"}'
                   hx-trigger="click"
                   hx-target="#articles-with-pagination"
                   hx-include="#score-filter, #topic-filter, #sort-filter">{{.FeedName}}</a>
                <time datetime="{{.Published.Format "2006-01-02T15:04:05Z07:00"}}">
                    {{.Published.Local.Format "Jan 2, 15:04"}}
                </time>
                <span class="score-badge">{{printf "%.1f" .RelevanceScore}}</span>
            </div>
        </div>
        <div class="condensed-actions">
            <button class="btn-feedback btn-like-small {{if eq .UserFeedback "like"}}active{{end}}"
                    hx-post="/api/v1/feedback/{{.ID}}/like"
                    hx-swap="outerHTML"
                    hx-target="closest .article-card"
                    hx-trigger="click"
                    hx-include="#score-filter, #topic-filter, #feed-filter, #sort-filter">
                üëç
            </button>
            <button class="btn-feedback btn-dislike-small {{if eq .UserFeedback "dislike"}}active{{end}}"
                    hx-post="/api/v1/feedback/{{.ID}}/dislike"
                    hx-swap="outerHTML"
                    hx-target="closest .article-card"
                    hx-trigger="click"
                    hx-include="#score-filter, #topic-filter, #feed-filter, #sort-filter">
                üëé
            </button>
        </div>
    </div>
    
    <!-- Expanded view content -->
    <div class="expanded-only">
        {{if .Description}}
        <p class="article-description">{{.Description}}</p>
        {{end}}
        
        <div class="classification">
            <div class="score-bar">
                <div class="score-fill" style="width: {{printf "%.0f" (mul .RelevanceScore 10)}}%"></div>
                <span class="score-text">Score: {{printf "%.1f" .RelevanceScore}}/10</span>
            </div>
            
            {{if .Explanation}}
            <p class="explanation">{{.Explanation}}</p>
            {{end}}
            
            {{if .Topics}}
            <div class="topics">
                {{range .Topics}}
                <a href="#" class="topic-tag clickable-topic" 
                   data-topic="{{.}}"
                   hx-get="/articles"
                   hx-vals='{"topic":"{{.}}"}'
                   hx-trigger="click"
                   hx-target="#articles-with-pagination"
                   hx-include="#score-filter, #feed-filter, #sort-filter">{{.}}</a>
                {{end}}
            </div>
            {{end}}
        </div>
        
        <div class="article-actions">
            <button class="btn-feedback btn-like {{if eq .UserFeedback "like"}}active{{end}}"
                    hx-post="/api/v1/feedback/{{.ID}}/like"
                    hx-swap="outerHTML"
                    hx-target="closest .article-card"
                    hx-trigger="click"
                    hx-include="#score-filter, #topic-filter, #feed-filter, #sort-filter">
                üëç Like
            </button>
            <button class="btn-feedback btn-dislike {{if eq .UserFeedback "dislike"}}active{{end}}"
                    hx-post="/api/v1/feedback/{{.ID}}/dislike"
                    hx-swap="outerHTML"
                    hx-target="closest .article-card"
                    hx-trigger="click"
                    hx-include="#score-filter, #topic-filter, #feed-filter, #sort-filter">
                üëé Dislike
            </button>
            {{if .ExtractedContent}}
            <span id="content-toggle-{{.ID}}">
                <button class="btn-content"
                        hx-get="/api/v1/articles/{{.ID}}/content"
                        hx-target="#content-{{.ID}}"
                        hx-swap="innerHTML">
                    Show Content
                </button>
            </span>
            {{else if not .ExtractionError}}
            <button class="btn-extract"
                    hx-post="/api/v1/extract/{{.ID}}"
                    hx-swap="outerHTML"
                    hx-target="closest .article-card">
                Extract Content
            </button>
            {{end}}
        </div>
        
        <div id="content-{{.ID}}"></div>
    </div>
</article>