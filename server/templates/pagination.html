{{define "pagination"}}
<div class="pagination" id="pagination">
    {{if gt .TotalPages 1}}
    <div class="pagination-info">
        Showing {{len .Articles}} of {{.TotalCount}} articles (Page {{.CurrentPage}} of {{.TotalPages}})
    </div>
    <div class="pagination-controls">
        {{if .HasPrev}}
            <a href="{{if .IsSearch}}/search{{else}}/articles{{end}}?page=1{{if .IsSearch}}&q={{.SearchQuery}}{{end}}&score={{.MinScore}}&topic={{.SelectedTopic}}&feed={{.SelectedFeed}}&sort={{.SelectedSort}}{{if .ShowLikedOnly}}&liked=on{{end}}" 
               class="pagination-btn"
               hx-get="{{if .IsSearch}}/search{{else}}/articles{{end}}?page=1{{if .IsSearch}}&q={{.SearchQuery}}{{end}}&score={{.MinScore}}&topic={{.SelectedTopic}}&feed={{.SelectedFeed}}&sort={{.SelectedSort}}{{if .ShowLikedOnly}}&liked=on{{end}}"
               hx-target="#articles-with-pagination"
               hx-swap="innerHTML show:body:top"
               hx-push-url="true"
               title="First page">⏮</a>
            <a href="{{if .IsSearch}}/search{{else}}/articles{{end}}?page={{sub .CurrentPage 1}}{{if .IsSearch}}&q={{.SearchQuery}}{{end}}&score={{.MinScore}}&topic={{.SelectedTopic}}&feed={{.SelectedFeed}}&sort={{.SelectedSort}}{{if .ShowLikedOnly}}&liked=on{{end}}" 
               class="pagination-btn"
               hx-get="{{if .IsSearch}}/search{{else}}/articles{{end}}?page={{sub .CurrentPage 1}}{{if .IsSearch}}&q={{.SearchQuery}}{{end}}&score={{.MinScore}}&topic={{.SelectedTopic}}&feed={{.SelectedFeed}}&sort={{.SelectedSort}}{{if .ShowLikedOnly}}&liked=on{{end}}"
               hx-target="#articles-with-pagination"
               hx-swap="innerHTML show:body:top"
               hx-push-url="true"
               title="Previous page">◀</a>
        {{end}}
        
        <!-- Page numbers -->
        {{range $page := .PageNumbers}}
            {{if eq $page $.CurrentPage}}
                <span class="pagination-btn current">{{$page}}</span>
            {{else}}
                <a href="{{if $.IsSearch}}/search{{else}}/articles{{end}}?page={{$page}}{{if $.IsSearch}}&q={{$.SearchQuery}}{{end}}&score={{$.MinScore}}&topic={{$.SelectedTopic}}&feed={{$.SelectedFeed}}&sort={{$.SelectedSort}}{{if $.ShowLikedOnly}}&liked=on{{end}}" 
                   class="pagination-btn"
                   hx-get="{{if $.IsSearch}}/search{{else}}/articles{{end}}?page={{$page}}{{if $.IsSearch}}&q={{$.SearchQuery}}{{end}}&score={{$.MinScore}}&topic={{$.SelectedTopic}}&feed={{$.SelectedFeed}}&sort={{$.SelectedSort}}{{if $.ShowLikedOnly}}&liked=on{{end}}"
                   hx-target="#articles-with-pagination"
                   hx-swap="innerHTML show:body:top"
                   hx-push-url="true">{{$page}}</a>
            {{end}}
        {{end}}
        
        {{if .HasNext}}
            <a href="{{if .IsSearch}}/search{{else}}/articles{{end}}?page={{add .CurrentPage 1}}{{if .IsSearch}}&q={{.SearchQuery}}{{end}}&score={{.MinScore}}&topic={{.SelectedTopic}}&feed={{.SelectedFeed}}&sort={{.SelectedSort}}{{if .ShowLikedOnly}}&liked=on{{end}}" 
               class="pagination-btn"
               hx-get="{{if .IsSearch}}/search{{else}}/articles{{end}}?page={{add .CurrentPage 1}}{{if .IsSearch}}&q={{.SearchQuery}}{{end}}&score={{.MinScore}}&topic={{.SelectedTopic}}&feed={{.SelectedFeed}}&sort={{.SelectedSort}}{{if .ShowLikedOnly}}&liked=on{{end}}"
               hx-target="#articles-with-pagination"
               hx-swap="innerHTML show:body:top"
               hx-push-url="true"
               title="Next page">▶</a>
            <a href="{{if .IsSearch}}/search{{else}}/articles{{end}}?page={{.TotalPages}}{{if .IsSearch}}&q={{.SearchQuery}}{{end}}&score={{.MinScore}}&topic={{.SelectedTopic}}&feed={{.SelectedFeed}}&sort={{.SelectedSort}}{{if .ShowLikedOnly}}&liked=on{{end}}" 
               class="pagination-btn"
               hx-get="{{if .IsSearch}}/search{{else}}/articles{{end}}?page={{.TotalPages}}{{if .IsSearch}}&q={{.SearchQuery}}{{end}}&score={{.MinScore}}&topic={{.SelectedTopic}}&feed={{.SelectedFeed}}&sort={{.SelectedSort}}{{if .ShowLikedOnly}}&liked=on{{end}}"
               hx-target="#articles-with-pagination"
               hx-swap="innerHTML show:body:top"
               hx-push-url="true"
               title="Last page">⏭</a>
        {{end}}
    </div>
    {{end}}
</div>
{{end}}